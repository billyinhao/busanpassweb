"use strict";(self.webpackChunkklook_ssr_user_center=self.webpackChunkklook_ssr_user_center||[]).push([["80372"],{17270:function(t,e,n){n.d(e,{Z:()=>a});var i=n("28395"),r=n("79999"),o=n("51854");let c=(0,r.namespace)("traveller/booking-list");class l extends r.Vue{get galileoBookingType(){return{spm:"SelectBookingPopup_BookingType",eventData:()=>new o.zF({booking_type:this.listType})}}get selectDesc(){return this.typeDesc[this.listType]}getTranslate(t){return this.$t(t)}handleChange(t){this.$inhouse.track("custom","body",{ext:{booking_type:{normal:"my_bookings",invalid:"payment_expired",archive:"removed_bookings"}[t]},spm:"Bookings.SelectBookingType"}),this.setListType(t),this.$emit("change")}constructor(...t){super(...t),this.typeDesc={normal:this.getTranslate("booking_title_booking_list"),invalid:this.getTranslate("11961"),archive:this.getTranslate("archive_booking_title_booking_list")},this.typeList=[{name:"normal",content:this.getTranslate("booking_title_booking_list")},{name:"invalid",content:this.getTranslate("11961")},{name:"archive",content:this.getTranslate("archive_booking_title_booking_list")}]}}(0,i.gn)([c.State],l.prototype,"listType",void 0),(0,i.gn)([c.Mutation("SET_LIST_TYPE")],l.prototype,"setListType",void 0);let s=l=(0,i.gn)([r.Component],l),a=(0,n("77427").Z)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-dropdown",{attrs:{value:t.listType,checkable:!0,placement:"bottom-start",trigger:"click"},on:{change:t.handleChange}},[n("h4",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:{spm:"BookingType"},expression:"{ spm: 'BookingType' }"}],staticClass:"booking-type-filter_title",attrs:{"data-spm-module":"BookingType","data-spm-virtual-item":"__virtual"}},[t._v(" "+t._s(t.selectDesc)+" "),n("klk-icon",{attrs:{type:"icon_navigation_chevron_down_xs"}})],1),n("klk-dropdown-menu",{attrs:{slot:"list"},slot:"list"},t._l(t.typeList,function(e){return n("klk-dropdown-item",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker.click",value:t.galileoBookingType,expression:"galileoBookingType",modifiers:{click:!0}}],key:e.name,attrs:{name:e.name}},[t._v(" "+t._s(e.content)+" ")])}),1)],1)},[],!1,null,null,null).exports},27546:function(t,e,n){n.d(e,{Z:()=>_});var i=n("28395"),r=n("79999"),o=n("60946"),c=n("50593"),l=n("27364"),s=n("57074");class a extends r.Vue{jumpTo(t){window.location.href=this.$href(`/activity/${t.id}-${t.url_seo}/`)}filterImg(t){let{webp:e,retina:n}=this.klook;return(0,l.Cp)(t,"recently_purchase",e,n)}getCurrencySymbol(t){return(0,o.jK)(t)}formatPriceThousands(t){return(0,c.nf)(t)}get galileoClick1(){return{spm:s.ES,autoTrackSpm:!0}}}(0,i.gn)([r.State],a.prototype,"klook",void 0),(0,i.gn)([(0,r.Prop)({type:Object,default:()=>{}})],a.prototype,"purchasedData",void 0);let u=a=(0,i.gn)([(0,r.Component)({})],a),_=(0,n("77427").Z)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.purchasedData?n("div",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:t.galileoClick1,expression:"galileoClick1"}],staticClass:"recently-purchase-card",attrs:{"data-spm-item":"__default?typ=entry"},on:{click:function(e){return t.jumpTo(t.purchasedData)}}},[n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image.container",value:t.filterImg(t.purchasedData.image_url),expression:"filterImg(purchasedData.image_url)",arg:"background-image",modifiers:{container:!0}}],staticClass:"recently-purchase-card_img",class:{"recently-purchase-card--img-soldOut":t.purchasedData.sold_out}}),n("div",{staticClass:"recently-purchase-card_right",class:{"recently-purchase-card--color-soldOut":t.purchasedData.sold_out}},[n("p",{staticClass:"recently-purchase-card_desc"},[t._v(t._s(t.purchasedData.title))]),n("div",{staticClass:"recently-purchase-card_info"},t.purchasedData.sold_out?[n("p",{staticClass:"sold-out-txt bold"},[t._v("Sold out")]),n("p",{staticClass:"recently-purchase-card_price",domProps:{innerHTML:t._s(t.$t("from_booking_list",{currency:t.getCurrencySymbol(t.purchasedData.currency),price:t.formatPriceThousands(t.purchasedData.sell_price)}))}})]:[n("p",{staticClass:"recently-purchase-card_price",domProps:{innerHTML:t._s(t.$t("from_booking_list",{currency:t.getCurrencySymbol(t.purchasedData.currency),price:t.formatPriceThousands(t.purchasedData.sell_price)}))}},[t.purchasedData.market_price>t.purchasedData.sell_price?n("span",[t._v(" "+t._s(t.getCurrencySymbol(t.purchasedData.currency))+" "+t._s(t.formatPriceThousands(t.purchasedData.market_price))+" ")]):t._e()])])])]):t._e()},[],!1,null,null,null).exports},12135:function(t,e,n){n.d(e,{Z:()=>l});var i=n("28395"),r=n("79999");class o extends r.Vue{}(0,i.gn)([(0,r.Prop)({type:Number,default:720})],o.prototype,"skeletonLong",void 0),(0,i.gn)([(0,r.Prop)({type:Number,default:556})],o.prototype,"skeletonShort",void 0),(0,i.gn)([(0,r.Prop)({type:Boolean,default:!1})],o.prototype,"reverse",void 0);let c=o=(0,i.gn)([(0,r.Component)({components:{}})],o),l=(0,n("77427").Z)(c,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"skeleton-content skeleton-content--active",class:{"skeleton-content--reverse":this.reverse}},[e("div",{staticClass:"skeleton-header"}),e("div",{staticClass:"skeleton-paragraph"},[e("p",{staticClass:"skeleton-paragraph_long",style:{width:this.skeletonLong+"px"}}),e("p",{staticClass:"skeleton-paragraph_short",style:{width:this.skeletonShort+"px"}}),e("p",{staticClass:"skeleton-paragraph_short",style:{width:this.skeletonShort+"px"}})])])},[],!1,null,null,null).exports},17776:function(t,e,n){n.d(e,{Z:()=>w});var i=n("28395"),r=n("79999"),o=n("10999"),c=n("51854"),l=n("11700"),s=n.n(l);class a extends r.Vue{showTipInfo(){this.$emit("showTip")}}(0,i.gn)([(0,r.Prop)({type:String,default:""})],a.prototype,"desc",void 0),(0,i.gn)([(0,r.Prop)({type:Boolean,default:!1})],a.prototype,"isIcon",void 0);let u=a=(0,i.gn)([r.Component],a);var _=n("77427");let k=(0,_.Z)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"booking-card-tips"},[t._v(" "+t._s(t.desc)+" "),t.isIcon?n("svg-icon",{attrs:{name:"mobile-common#icon-info",width:"13px",height:"13px"},nativeOn:{click:function(e){return e.stopPropagation(),t.showTipInfo.apply(null,arguments)}}}):t._e()],1)},[],!1,null,null,null).exports;var d=n("81422"),p=n("57074");class f extends r.Vue{handleClick(t){this.$emit("click",t)}get galileoClick1(){return{spm:p.ZR,autoTrackSpm:!0}}}(0,i.gn)([(0,r.Prop)({type:Array,default:()=>[]})],f.prototype,"options",void 0);let h=f=(0,i.gn)([(0,r.Component)({components:{IconMoreHorizontal:d.default}})],f),b=(0,_.Z)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("klk-dropdown",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker:click",value:{spm:"Tab"},expression:"{\n    spm: 'Tab'\n  }",arg:"click"}],staticClass:"more-option-contain",attrs:{trigger:"click",placement:"bottom-end"},nativeOn:{click:function(t){t.stopPropagation()}}},[t._t("default",function(){return[n("IconMoreHorizontal",{staticStyle:{padding:"4px 20px"},attrs:{theme:"outline",size:"24"}})]}),n("klk-dropdown-menu",{attrs:{slot:"list"},slot:"list"},[t._t("DropdownItem",function(){return t._l(t.options,function(e,i){return n("klk-dropdown-item",{directives:[{name:"galileo-click-tracker",rawName:"v-galileo-click-tracker",value:t.galileoClick1,expression:"galileoClick1"}],key:i,attrs:{name:e,"data-spm-item":"Tab?typ=entry&ext="+JSON.stringify({LinkUrl:encodeURIComponent(e.deep_link)})},nativeOn:{click:function(n){return n.stopPropagation(),t.handleClick(e)}}},[t._v(" "+t._s(e.title)+" ")])})})],2)],2)},[],!1,null,null,null).exports;class g extends r.Vue{}let C=g=(0,i.gn)([r.Component],g),m=(0,_.Z)(C,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"topping-sign"},[e("SvgIcon",{staticClass:"credit-banner_icon",attrs:{name:"common#top-sign",width:"28",height:"28"}})],1)},[],!1,null,null,null).exports;var W=n("60946"),v=n("50593"),y=n("43669");let $=(0,r.namespace)("traveller/booking-list"),T=t=>/^(cancel_)?(delete|stick)_order$/.test(t);class w extends r.Vue{buttonClick(t){let e=this.bookingItem.booking_reference_no;switch(t.button_type){case"cancel_draft_order":return this.cancelDraftOrder(this.bookingItem.draft_order_id);case"refresh_draft_order":return this.refreshList();case"delete_order":return this.handleDeleteOrder(e);case"cancel_delete_order":return this.handleCancelDeleteOrder(e);case"stick_order":return this.handleStickOrder(e);case"cancel_stick_order":return this.handleCancelStickOrder(e);default:{let e=t.deep_link;if(!e)return;e.includes("view_app_voucher")?this.handleViewAppVoucher():e.includes("view_logistics")?this.handleViewLogistics(e):["booking/combo","combine_booking"].some(t=>e.includes(t))?this.handleShowMerge(e):this.handleJumpTo(e)}}}handleJumpTo(t,e){return(null==e?void 0:e.action)==="toast"?this.$toast(e.text):t?t.includes("view_in_app")?this.handleViewAppVoucher():void window.open((0,v.d5)(t)):void 0}handleDeleteOrder(t){this.$confirm(this.$t("11974"),this.$t("remove_booking_remind_title"),{okLabel:this.$t("global.confirm"),cancelLabel:this.$t("cancel")}).then(e=>{e.result&&this.$axios.$post(y.Z.deleteBooking,{booking_no:t},{loading:!0}).then(t=>{t.success?(this.$toast(this.$t("booking_archived_tip")),setTimeout(this.refreshList,1e3)):this.$toast(this.$t("loading_failed"))})})}handleCancelDeleteOrder(t){this.$axios.$post(y.Z.cancelDeleteBooking,{booking_no:t},{loading:!0}).then(t=>{t.success?(this.$toast(this.$t("booking.management.submission_successful")),setTimeout(this.refreshList,1e3)):this.$toast(this.$t("loading_failed"))})}handleStickOrder(t){this.$axios.$post(y.Z.stickBooking,{booking_no:t},{loading:!0}).then(t=>{t.success?(this.$toast(this.$t("booking_pinned_tip")),setTimeout(this.refreshList,1e3)):"040051"===t.error.code?this.$toast(this.$t("17022")):this.$toast(this.$t("loading_failed"))})}handleCancelStickOrder(t){this.$axios.$post(y.Z.cancelStickBooking,{booking_no:t},{loading:!0}).then(t=>{t.success?(this.$toast(this.$t("booking_unpinned_tip")),setTimeout(this.refreshList,1e3)):this.$toast(this.$t("loading_failed"))})}get isCanceled(){let{status:t}=this.bookingItem.status||{};return t&&["DraftCanceled","Canceled","UserCanceled","Expired"].includes(t)}get filteredButtons(){return this.bookingItem.buttons?this.bookingItem.buttons.filter(t=>!t.deep_link.includes("bookings/manage_booking")):[]}get options(){let{operation_status:t}=this.bookingItem,e=[];if(t){if(null==t?void 0:t.is_del)return e;t.can_del&&e.push({button_type:"delete_order",title:this.$t("archive")}),t.can_stick&&e.push({button_type:"stick_order",title:this.$t("pin_to_top")}),t.is_stick&&e.push({button_type:"cancel_stick_order",title:this.$t("remove_pinned_item")})}return this.filteredButtons.slice(2).concat(e)}async cancelDraftOrder(t){if(!t)return;"string"!=typeof t&&(t=t.toString());let{result:e}=await this.$confirm(this.$t("booking_restore_from_archive"),this.$t("remove_booking_remind_title"),{okLabel:this.$t("global.confirm"),cancelLabel:this.$t("cancel")});if(!!e)try{await this.$axios.$post(y.Z.cancelDraftOrder,{draft_order_id_str:t},{loading:!0,throwError:!0}),this.$toast(this.$t("200618")),setTimeout(this.refreshList,1e3,"invalid")}catch(t){this.$toast((null==t?void 0:t.message)||this.$t("loading_failed"))}}getActionIht(t){if(!T(t))return;let[e,n]=t.split("_").slice(0,-1);return!n&&(n=e,e="confirm"),"stick"===n&&(n="pin"),`${s()(n)}?typ=entry&ext=${JSON.stringify({Type:e})}`}handleViewLogistics(t){this.showLogisticsModal((0,v.dD)("bookingRefNo",t))}handleShowMerge(t){this.showMergeOption({orderNo:(0,v.dD)("order_no",t),type:(0,v.dD)("type",t)||"pay"})}galileoTabClick(t){return{spm:"BookingDetailCard.Tab",eventData:()=>{var e,n,i,r;return new c.zF({booking_status:null===(n=this.bookingItem)||void 0===n?void 0:null===(e=n.status)||void 0===e?void 0:e.track_status,booking_ref_no:null===(i=this.bookingItem)||void 0===i?void 0:i.booking_reference_no,draft_order_id:null===(r=this.bookingItem)||void 0===r?void 0:r.draft_order_id,action_type:t.button_type})}}}get galileoBookingCard(){return{spm:"BookingDetailCard",eventData:()=>{var t,e,n;return new c.zF({booking_status:null===(e=this.bookingItem)||void 0===e?void 0:null===(t=e.status)||void 0===t?void 0:t.track_status,booking_ref_no:null===(n=this.bookingItem)||void 0===n?void 0:n.booking_reference_no})}}}}(0,i.gn)([(0,r.Prop)({type:Object,default:()=>({})})],w.prototype,"bookingItem",void 0),(0,i.gn)([$.State],w.prototype,"listType",void 0),(0,i.gn)([$.Action],w.prototype,"showLogisticsModal",void 0),(0,i.gn)([$.Action],w.prototype,"showMergeOption",void 0),(0,i.gn)([$.Mutation("SET_LIST_TYPE")],w.prototype,"setListType",void 0),w=(0,i.gn)([(0,r.Component)({components:{BookingCardTips:k,ToppingSign:m,CountDown:o.Z,MoreOption:b},filters:{currencySymbol:t=>W.Qb[t],formatPrice:t=>(0,v.JZ)(t)}})],w)},57074:function(t,e,n){n.d(e,{$H:function(){return tc},A5:function(){return tU},AC:function(){return tE},B0:function(){return te},B8:function(){return L},BK:function(){return N},Bc:function(){return tH},Bi:function(){return tM},Bo:function(){return t3},Ci:function(){return tB},Cn:function(){return G},DX:function(){return tp},Dg:function(){return tn},E4:function(){return A},EL:function(){return tt},ES:function(){return es},Ei:function(){return t4},Ep:function(){return l},FN:function(){return tv},Ft:function(){return ei},Fu:function(){return r},Gh:function(){return tz},Ho:function(){return tF},IR:function(){return tx},IX:function(){return tW},Id:function(){return ty},J4:function(){return tk},KE:function(){return ec},KO:function(){return tf},KV:function(){return k},Kh:function(){return t_},Ln:function(){return g},MW:function(){return t7},Mh:function(){return t6},OE:function(){return m},OG:function(){return D},OK:function(){return t$},OR:function(){return E},OT:function(){return U},QK:function(){return tA},Qw:function(){return tQ},S2:function(){return et},S8:function(){return j},Sf:function(){return S},TU:function(){return X},UP:function(){return eo},VM:function(){return u},Vi:function(){return t5},WZ:function(){return tK},Wb:function(){return tY},Wt:function(){return ta},XG:function(){return tP},Xg:function(){return el},Xx:function(){return C},Y4:function(){return Q},Yd:function(){return td},Yh:function(){return R},Yq:function(){return F},ZA:function(){return tO},ZR:function(){return ea},ZU:function(){return q},ZX:function(){return K},Zb:function(){return tb},aB:function(){return tN},aM:function(){return t9},ac:function(){return tL},bG:function(){return th},bk:function(){return W},bq:function(){return O},cx:function(){return tS},d5:function(){return eu},dN:function(){return J},dh:function(){return tC},dp:function(){return M},e$:function(){return tl},e4:function(){return tZ},ev:function(){return P},f0:function(){return T},f1:function(){return tm},fl:function(){return tI},g4:function(){return t8},gy:function(){return c},hC:function(){return tq},hH:function(){return tR},hR:function(){return b},hU:function(){return ts},ik:function(){return o},j$:function(){return tw},jQ:function(){return $},jR:function(){return t0},jm:function(){return tu},jz:function(){return _},kl:function(){return f},l1:function(){return w},lo:function(){return x},mL:function(){return en},nY:function(){return Y},oF:function(){return tj},oO:function(){return a},oQ:function(){return y},pm:function(){return s},pv:function(){return I},q2:function(){return p},qW:function(){return v},r6:function(){return Z},rB:function(){return tJ},rH:function(){return t2},rp:function(){return h},rt:function(){return ti},s8:function(){return tG},sf:function(){return er},t1:function(){return tT},tM:function(){return tD},tz:function(){return tV},u2:function(){return V},u6:function(){return B},uh:function(){return d},v9:function(){return tX},vh:function(){return tg},vt:function(){return tr},w6:function(){return to},x2:function(){return z},x9:function(){return H},xR:function(){return t1},yk:function(){return i},yr:function(){return ee}});let i="WebClick_11",r="WebClick_21",o="WebClick_31",c="WebClick_32",l="WebClick_41",s="WebClick_51",a="WebClick_61",u="WebClick_62",_="WebClick_71",k="WebClick_81",d="WebClick_91",p="WebClick_101",f="WebClick_111",h="WebClick_121",b="WebClick_131",g="WebClick_141",C="WebClick_142",m="WebClick_143",W="WebClick_144",v="WebClick_171",y="WebClick_181",$="WebClick_191",T="WebClick_201",w="WebClick_202",x="WebClick_221",D="WebClick_231",S="WebClick_251",I="WebClick_261",B="WebClick_271",L="WebClick_272",O="WebClick_281",Z="WebClick_291",P="WebClick_301",E="WebClick_303",M="WebClick_311",V="WebClick_312",N="WebClick_321",j="WebClick_322",z="WebClick_323",A="WebClick_324",R="WebClick_325",H="WebClick_326",K="WebClick_327",F="WebClick_331",U="WebClick_332",Y="WebClick_333",J="WebClick_334",X="WebClick_341",Q="WebClick_342",q="WebClick_343",G="WebClick_344",tt="WebClick_351",te="WebClick_361",tn="WebClick_362",ti="WebClick_363",tr="WebClick_371",to="WebClick_372",tc="WebClick_373",tl="WebClick_374",ts="WebClick_381",ta="WebClick_391",tu="WebClick_392",t_="WebClick_393",tk="WebClick_401",td="WebClick_411",tp="WebClick_412",tf="WebClick_413",th="WebClick_414",tb="WebClick_431",tg="WebClick_451",tC="WebClick_461",tm="WebClick_471",tW="WebClick_481",tv="WebClick_491",ty="WebClick_492",t$="WebClick_501",tT="WebClick_511",tw="WebClick_521",tx="WebClick_531",tD="WebClick_541",tS="WebClick_571",tI="WebClick_572",tB="WebClick_581",tL="WebClick_591",tO="WebClick_601",tZ="WebClick_602",tP="WebClick_611",tE="WebClick_612",tM="WebClick_621",tV="WebClick_631",tN="WebClick_632",tj="WebClick_641",tz="WebClick_642",tA="WebClick_651",tR="WebClick_652",tH="WebClick_661",tK="WebClick_671",tF="WebClick_672",tU="WebClick_681",tY="WebClick_691",tJ="WebClick_701",tX="WebClick_702",tQ="WebClick_711",tq="WebClick_721",tG="WebClick_731",t1="WebClick_732",t0="WebClick_733",t2="WebClick_734",t3="WebClick_735",t7="WebClick_736",t4="WebClick_737",t9="WebClick_741",t6="WebClick_751",t5="WebClick_761",t8="WebClick_771",et="WebClick_781",ee="WebClick_791",en="WebClick_801",ei="WebClick_811",er="WebClick_821",eo="WebClick_822",ec="WebClick_831",el="WebClick_841",es="WebClick_871",ea="WebClick_881",eu="Companion_LIST"}}]);