"use strict";(self.webpackChunkklook_ssr_user_center=self.webpackChunkklook_ssr_user_center||[]).push([["69401"],{1719:function(t){var e="/v\\d+",n=new RegExp(e);t.exports=function(t,o){if(void 0===o&&(o={quantity:85}),!(null===(r=null==t?void 0:t.includes)||void 0===r?void 0:r.call(t,"res.klook.com")))return t;var r,a=o.dirname,i=o.width,c=o.height,s=o.fill,p=void 0===s?"fill":s,u=o.quantity,l=void 0===u?"85":u,d=o.custom,h=o.gravity,f=o.webp,m="/image/upload",v=n.test(t),g=a?a.split("/").map(function(t){return encodeURIComponent(t)}).join("/"):"(/.+)?",b="".concat(m,"(").concat("(/(w|h|c|ar|g|z|x|y|f|q|r|a|e|o|bo|b|l|u|d|dl|co|cs|dpr|pg|dn|fl|t|if|fn)_[^/]+)*",")").concat(v?e:"").concat(g,"/[^/]+\\.[a-z]+$"),y=t.match(new RegExp(b));if(!y||!y.length)return t;var _=y[1],x=t;_&&(x=t.replace(_,""));var w=[];return(i&&w.push("w_".concat(i)),c&&w.push("h_".concat(c)),(i||c)&&p&&w.push("c_".concat(p)),l&&w.push("q_".concat(l)),h&&w.push("g_".concat(h)),d&&w.push(d),f&&(x=x.replace(/\.[^.]+$/,".webp")),null==w?void 0:w.length)?x.replace(m,"".concat(m,"/fl_lossy.progressive,").concat(w.join(","))):x}},47616:function(t,e,n){n.d(e,{u:function(){return w}});var o=n(95334),r=n(76718),a=function(t,e){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var c=function(){return(c=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function s(t,e,n,o){var r,a=arguments.length,i=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,n,i):r(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}function p(t,e,n,o){return new(n||(n=Promise))(function(r,a){function i(t){try{s(o.next(t))}catch(t){a(t)}}function c(t){try{s(o.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(i,c)}s((o=o.apply(t,e||[])).next())})}function u(t,e){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"imageRatio",{get:function(){return this.text?"desktop"===this.klook.platform?"desktopChatEntranceIconWithText":"mobileChatEntranceIconWithText":"desktop"===this.klook.platform?"desktopChatEntranceIcon":"mobileChatEntranceIcon"},enumerable:!1,configurable:!0}),s([(0,o.Prop)({type:Object,default:function(){return{}}})],e.prototype,"klook",void 0),s([(0,o.Prop)({type:String,default:""})],e.prototype,"icon",void 0),s([(0,o.Prop)({type:String,default:""})],e.prototype,"text",void 0),e=s([o.Component],e)}(o.Vue);function d(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}function h(t,e,n,o,r,a,i,c,s,p){let u;"boolean"!=typeof i&&(s=c,c=i,i=!1);let l="function"==typeof n?n.options:n;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,r&&(l.functional=!0)),o&&(l._scopeId=o),a?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,s(t)),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=u):e&&(u=i?function(t){e.call(this,p(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,c(t))}),u){if(l.functional){let t=l.render;l.render=function(e,n){return u.call(n),t(e,n)}}else{let t=l.beforeCreate;l.beforeCreate=t?[].concat(t,u):[u]}}return n}d(".chat-entrance-icon-wrapper[data-v-56c171c3] {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.chat-entrance-icon-wrapper img[data-v-56c171c3] {\n  width: 24px;\n  height: 24px;\n}");var f=function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"chat-entrance-icon-wrapper"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.icon,expression:"icon"}],class:{"with-text":this.text},attrs:{"data-img-type":this.imageRatio,alt:""}})])};f._withStripped=!0;let m=h({render:f,staticRenderFns:[]},void 0,l,"data-v-56c171c3",!1,void 0,!1,void 0,void 0,void 0);function v(t){return({de:"de_DE",en:"en_BS","en-AU":"en_AU","en-CA":"en_CA","en-GB":"en_GB","en-HK":"en_HK","en-IN":"en_IN","en-MY":"en_MY","en-NZ":"en_NZ","en-PH":"en_PH","en-SG":"en_SG","en-US":"en_US",es:"es_ES",fr:"fr_FR",id:"id_ID",it:"it_IT",ja:"ja_JP",ko:"ko_KR",ru:"ru_RU",th:"th_TH",vi:"vi_VN","zh-CN":"zh_CN","zh-HK":"zh_HK","zh-TW":"zh_TW"})[t]}function g(t,e,n){switch(t){case"new-web":return e();case"nuxt":return n()}}var b=function(t,e,n){return g(t,function(){var t;return null===(t=e.klook)||void 0===t?void 0:t.getLangPath(n)},function(){return e.href(n)})},y=function(t,e,n,o){return void 0===n&&(n={}),void 0===o&&(o={}),p(void 0,void 0,void 0,function(){var r;return u(this,function(a){var i,s;return r={},e.ctx.isFromApp&&(r["Klook-App-Version"]=!!(s=(i||navigator.userAgent).match(/klook\/(\d+\.)+\d+/))&&s[0].split("/")[1]),[2,g(e.project,function(){var a=e.ctx.klook;return new Promise(function(e,i){try{null==a||a.ajaxGet(t,c({},n),function(t){e(t)},c(c({},r),o))}catch(t){console.log("%cError:","color: red;",t),i(t)}})},function(){return p(void 0,void 0,void 0,function(){var a;return u(this,function(i){switch(i.label){case 0:a=e.ctx.axios,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null==a?void 0:a.$get(t,{params:n,headers:c(c({},r),o)})];case 2:return[2,i.sent()];case 3:return console.log("%cError:","color: red;",i.sent()),[2,null];case 4:return[2]}})})})]})})},_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasSession=!1,e.badgeNum=0,e.showPopup=!1,e.chatEntranceConfig={},e}return i(e,t),Object.defineProperty(e.prototype,"isDesktop",{get:function(){return"desktop"===this.platform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousPage",{get:function(){return this.previousPageName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldDisplay",{get:function(){return"Account"!==this.previousPage||this.badgeNum||0===this.badgeNum&&this.hasSession},enumerable:!1,configurable:!0}),e.prototype.previousPageChange=function(){this.fetchChatEntranceData()},e.prototype.getUnreadCount=function(){return p(this,void 0,void 0,function(){var t,e,n,o;return u(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,y("/v1/faqchatcommsrv/conversation/chat_message/unreadcount",{project:this.project,ctx:{klook:this.klook,axios:this.axios,isFromApp:this.isFromApp}})];case 1:return e=(t=r.sent()).success,n=t.result,e?(o=n.have_ticket,[2,{hasSession:o,badgeNum:n.unread_count}]):[2,{}];case 2:return r.sent(),[2,{}];case 3:return[2]}})})},e.prototype.fetchChatEntranceData=function(){return p(this,void 0,void 0,function(){var t=this;return u(this,function(e){switch(e.label){case 0:return this.chatEntranceConfig={},[4,y("/v1/faqchatcommsrv/unifiedentrance/config",{project:this.project,ctx:{klook:this.klook,axios:this.axios,isFromApp:this.isFromApp}},{page_name:this.previousPage}).then(function(e){return p(t,void 0,void 0,function(){var t,n,o,r,a,i,c,s,p,l,d,h,f,m,g,b,y=this;return u(this,function(u){switch(u.label){case 0:return(null==e?void 0:e.success)&&e.result?(clearTimeout(this.timerStart),clearTimeout(this.timerEnd),n=(t=e.result).page_list,o=t.default_config,(r=n.find(function(t){return t.page_name===y.previousPage}))?(a=r.locales.find(function(t){return t.locale===v(y.lang)}))?a.double_check?[3,4]:(c=(i=r.config?r.config:o).icon,s=i.action_link,p=i.bubble_switch,l=i.bubble_text,d=i.bubble_trigger_duration,this.chatEntranceConfig={icon:c,jumpLink:s,poptipSwitch:p,poptipText:l?l[v(this.lang)]:"",poptipDuration:d},this.setEntranceDisplayTimer(+d),c?[4,this.getUnreadCount()]:[3,2]):(this.$emit("chat-entrance-show",!1),[2]):[3,5]):[3,5];case 1:return m=void 0!==(f=(h=u.sent()).hasSession)&&f,b=void 0===(g=h.badgeNum)?0:g,this.hasSession=m,this.badgeNum=b,this.$emit("chat-entrance-show",!0),[3,3];case 2:this.$emit("chat-entrance-show",!1),u.label=3;case 3:return[3,5];case 4:this.$emit("chat-entrance-show",!1),u.label=5;case 5:return[2]}})})})];case 1:return e.sent(),[2]}})})},e.prototype.mounted=function(){this.fetchChatEntranceData()},e.prototype.setEntranceDisplayTimer=function(t){var e=this;this.timerStart=setTimeout(function(){e.showPopup=!0,e.isDesktop&&(e.timerEnd=setTimeout(function(){e.showPopup=!1,clearTimeout(e.timerEnd)},5e3)),clearTimeout(e.timerStart)},1e3*t)},e.prototype.toChat=function(){function t(t,e){switch(t){case"nuxt":break;case"new-web":return e.substring(1)}return e}var e,n,o,r=encodeURIComponent(JSON.stringify({previousPageName:this.previousPage,previousPageLink:location.href,objectId:this.objectId,extraInfo:this.extraInfo})),a=new URL(this.chatEntranceConfig.jumpLink);o=function(t,e){if(!e){if(1!=arguments.length||"object"!=typeof window)return"";e=window.location.search}var n=(RegExp("[?|&]*"+t+"=([^&;]+?)(&|#|;|$)").exec(e)||[])[1],o=void 0===n?"":n;return o&&decodeURIComponent(o.replace(/\+/g,"%20"))}("from",a.search)?b(this.project,{klook:this.klook,href:null===(e=this.href)||void 0===e?void 0:e.bind(this)},"".concat(t(this.project,a.pathname)).concat(a.search,"&context=").concat(r)):b(this.project,{klook:this.klook,href:null===(n=this.href)||void 0===n?void 0:n.bind(this)},"".concat(t(this.project,a.pathname),"?from=").concat(this.previousPage,"&context=").concat(r)),this.isDesktop?window.open(o):window.location.href=o},s([(0,o.Prop)({type:String,default:"nuxt"})],e.prototype,"project",void 0),s([(0,o.Prop)({type:Object,default:function(){return{}}})],e.prototype,"klook",void 0),s([(0,o.Prop)({type:String})],e.prototype,"lang",void 0),s([(0,o.Prop)({type:String})],e.prototype,"platform",void 0),s([(0,o.Prop)({type:Function})],e.prototype,"axios",void 0),s([(0,o.Prop)({type:Object,default:function(){return{}}})],e.prototype,"route",void 0),s([(0,o.Prop)({type:Function})],e.prototype,"href",void 0),s([(0,o.Prop)({type:[String,Number]})],e.prototype,"objectId",void 0),s([(0,o.Prop)({type:Object,default:function(){return{}}})],e.prototype,"extraInfo",void 0),s([(0,o.Prop)({type:String,default:function(){return"AskBtn"}})],e.prototype,"spmName",void 0),s([(0,o.Prop)({type:String})],e.prototype,"previousPageName",void 0),s([(0,o.Prop)({type:Number})],e.prototype,"bottom",void 0),s([(0,o.Prop)({type:Boolean})],e.prototype,"isFromApp",void 0),s([(0,o.Watch)("previousPageName")],e.prototype,"previousPageChange",null),e=s([(0,o.Component)({components:{ChatEntranceIcon:m,KlkPoptip:r.default}})],e)}(o.Vue);d(".chat-entrance-wrapper[data-v-33877aac] {\n  font-style: normal;\n  box-sizing: border-box;\n  position: fixed;\n  bottom: calc(env(safe-area-inset-bottom) + 108px);\n  right: 18px;\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 500;\n  transform: translateY(0);\n  transition: all 0.2s ease-in-out 0.1s;\n  color: #ffffff;\n  font-size: 12px;\n}\n.chat-entrance-wrapper[inline][data-v-33877aac] {\n  display: inline;\n  position: static;\n}\n.chat-entrance-wrapper.desktop[data-v-33877aac] {\n  width: 50px;\n  height: 50px;\n  bottom: 140px;\n  right: 40px;\n}\n.chat-entrance-wrapper.mobile[data-v-33877aac] {\n  z-index: 28;\n}\n.chat-entrance-wrapper.mobile[data-v-33877aac]  .klk-poptip-popper::after {\n  right: 17px !important;\n}\n.chat-entrance-wrapper.mobile[data-v-33877aac]  .klk-poptip-popper-inner {\n  width: -webkit-max-content;\n  width: -moz-max-content;\n  width: max-content;\n  max-width: calc(100vw - 32px) !important;\n  padding: 0 36px 0 12px;\n  margin: 12px 0;\n}\n.chat-entrance-wrapper.mobile[data-v-33877aac]  .klk-poptip-popper-close-btn {\n  top: 14px;\n}\n.chat-entrance-wrapper .chat-entrance[data-v-33877aac] {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  border: 0;\n  justify-content: center;\n  align-items: center;\n  background: linear-gradient(135deg, #FFA673 0%, #F74600 100%);\n  box-shadow: 0 4px 10px 0 rgba(0, 0, 0, 0.14);\n}\n.chat-entrance-wrapper .chat-entrance .klk-poptip-popper-content[data-v-33877aac] {\n  white-space: nowrap;\n}\n.chat-entrance-wrapper .chat-entrance[data-v-33877aac]:hover {\n  box-shadow: 0 6px 12px 0 rgba(0, 0, 0, 0.12), 0 -1px 2px 0 rgba(0, 0, 0, 0.08);\n}\n.chat-entrance-wrapper .chat-entrance .badge[data-v-33877aac] {\n  position: absolute;\n  height: 18px;\n  left: 26px;\n  top: -2px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 5px;\n  border-radius: 16px;\n  background: #FF5B00;\n  border: 1px solid #fff;\n  font-weight: 500;\n  font-size: 12px;\n  color: #fff;\n}");var x=function(){var t,e=this,n=e.$createElement,o=e._self._c||n;return e.chatEntranceConfig.icon&&e.shouldDisplay?o("section",e._b({class:[{"chat-entrance-wrapper":!e.$slots.default},e.platform],style:e.bottom&&{bottom:e.bottom+"px"},on:{click:e.toChat}},"section",e.spmName?((t={})["data-spm-module"]=e.spmName,t):{},!1),[e._t("default",["desktop"===e.platform?[e.chatEntranceConfig&&e.chatEntranceConfig.poptipSwitch?o("klk-poptip",{attrs:{content:e.chatEntranceConfig.poptipText,placement:"left","append-to-body":!0},model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}},[o("div",{attrs:{"data-spm-item":"__default?typ=entry"}},[o("a",{staticClass:"chat-entrance",attrs:{href:"javascript:void(0)"}},[o("chat-entrance-icon",{attrs:{icon:e.chatEntranceConfig.icon,text:e.chatEntranceConfig.text}}),e._v(" "),e.badgeNum?o("div",{staticClass:"badge"},[e.badgeNum>99?o("span",{staticClass:"plus-mark-box"},[o("span",[e._v("99+")])]):o("span",[e._v(e._s(e.badgeNum))])]):e._e()],1)])]):o("div",{attrs:{"data-spm-item":"__default?typ=entry"}},[o("a",{staticClass:"chat-entrance",attrs:{href:"javascript:void(0)"}},[o("chat-entrance-icon",{attrs:{icon:e.chatEntranceConfig.icon,text:e.chatEntranceConfig.text,badgeNum:e.badgeNum}}),e._v(" "),e.badgeNum?o("div",{staticClass:"badge"},[e.badgeNum>99?o("span",{staticClass:"plus-mark-box"},[o("span",[e._v("99+")])]):o("span",[e._v(e._s(e.badgeNum))])]):e._e()],1)])]:"mobile"===e.platform?[e.chatEntranceConfig&&e.chatEntranceConfig.poptipSwitch?o("klk-poptip",{attrs:{trigger:"none",placement:"top-end",dark:"",closable:""},model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}},[o("a",{staticClass:"chat-entrance",attrs:{"data-spm-item":"__default?typ=entry"}},[o("chat-entrance-icon",{attrs:{icon:e.chatEntranceConfig.icon,text:e.chatEntranceConfig.text,badgeNum:e.badgeNum}}),e._v(" "),e.badgeNum?o("div",{staticClass:"badge"},[e.badgeNum>99?o("span",{staticClass:"plus-mark-box"},[o("span",[e._v("99+")])]):o("span",[e._v(e._s(e.badgeNum))])]):e._e()],1),e._v(" "),o("div",{attrs:{slot:"content"},on:{click:e.toChat},slot:"content"},[e._v(" "+e._s(e.chatEntranceConfig.poptipText)+" ")])]):o("div",{attrs:{"data-spm-item":"__default?typ=entry"}},[o("a",{staticClass:"chat-entrance",attrs:{href:"javascript:void(0)"}},[o("chat-entrance-icon",{attrs:{icon:e.chatEntranceConfig.icon,text:e.chatEntranceConfig.text}}),e._v(" "),e.badgeNum?o("div",{staticClass:"badge"},[e.badgeNum>99?o("span",{staticClass:"plus-mark-box"},[o("span",[e._v("99+")])]):o("span",[e._v(e._s(e.badgeNum))])]):e._e()],1)])]:e._e()])],2):e._e()};x._withStripped=!0;let w=h({render:x,staticRenderFns:[]},void 0,_,"data-v-33877aac",!1,void 0,!1,void 0,void 0,void 0)},5246:function(t,e){function n(t){if(!t)return 0;let e="string"==typeof t?t:t.$options.name;switch(e=e.replace("klk-","")){case"toast":case"message":return 3e3;case"modal":case"bottom-sheet":case"drawer":case"loading":return 2e3;case"notification":return 1200;case"announcement":return 600;case"poptip":case"dropdown":case"select":return 200;default:return 0}}Object.defineProperty(e,"__esModule",{value:!0});e.findComponentDownward=function t(e,n){let o=e.$children,r=null;if(o.length)for(let e of o){if(e.$options.name===n){r=e;break}if(r=t(e,n))break}return r},e.findComponentUpward=function(t,e,n){n="string"==typeof e?[e]:e;let o=t.$parent,r=o.$options.name;for(;o&&(!r||0>n.indexOf(r));)(o=o.$parent)&&(r=o.$options.name);return o},e.findComponentsDownward=function t(e,n){return e.$children.reduce((e,o)=>{o.$options.name===n&&e.push(o);let r=t(o,n);return e.concat(r)},[])},e.findComponentsUpward=function t(e,n){let o=[],r=e.$parent;return r?(r.$options.name===n&&o.push(r),o.concat(t(r,n))):[]},e.genUpdateCompZIndexFn=function(t,e){let o=t=t||n(e);return function(e=!1){return e&&(o=t),o++}},e.getCompInitialZIndex=n,e.getFirstComponentChild=function(t){return t&&t.filter(t=>t&&t.tag)[0]}},18991:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(20144);let a=((o=r)&&"object"==typeof o&&"default"in o?o:{default:o}).default.prototype.$isServer,i=/-(\w)/g,c=/\B([A-Z])/g;e.camelize=function(t){return t.replace(i,(t,e)=>e?e.toUpperCase():"")},e.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},e.hyphenate=function(t){return t.replace(c,"-$1").toLowerCase()},e.isServer=a}}]);